function addlinks(e){return e=(e=e.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(e){return'<a href="'+e+'" >'+e+"</a>"})).replace(/\B@([_a-z0-9]+)/gi,function(e){return'<a href="http://twitter.com/'+e.substring(1)+'" style="font-weight:lighter;" >'+e.charAt(0)+e.substring(1)+"</a>"})}function relative_time(e){var t=e.split(" "),n=(e=t[1]+" "+t[2]+", "+t[5]+" "+t[3],Date.parse(e)),a=1<arguments.length?arguments[1]:new Date,s=parseInt((a.getTime()-n)/1e3),i=e.substr(4,2)+" "+e.substr(0,3);return(s+=60*a.getTimezoneOffset())<60?"1m":s<120?"1m":s<3600?parseInt(s/60).toString()+"m":s<7200?"1h":s<86400?parseInt(s/3600).toString()+"h":i}function populateInstagram(e){e.find(".feed").instagram({userId:"327816113",accessToken:"327816113.1677ed0.572bac214e3c418a97c6773e591567aa",image_size:"thumbnail",show:12}).find(".spinner").addClass("hidden")}function sesStorage(){try{return"sessionStorage"in window&&null!==window.sessionStorage}catch(e){return!1}}!function(o){o.fn.instagram=function(e){function s(e,t){var n=e.images.thumbnail.url;"low_resolution"==l.image_size?n=e.images.low_resolution.url:"thumbnail"==l.image_size?n=e.images.thumbnail.url:"standard_resolution"==l.image_size&&(n=e.images.standard_resolution.url);var a=o("<img>").addClass("instagram-image").attr("src",n);return l.photoLink&&(a=o("<a>").attr("target","_blank").attr("href",e.link).append(a)),o("<div>").addClass("instagram-placeholder").attr("id","inst"+t).append(a)}var t,n,i=this,a="https://api.instagram.com/v1",l={hash:null,userId:null,locationId:null,search:null,accessToken:null,clientId:null,show:null,onLoad:null,onComplete:null,maxId:null,minId:null,next_url:null,image_size:null,photoLink:!0};return e&&o.extend(l,e),null!=l.onLoad&&"function"==typeof l.onLoad&&l.onLoad(),o.ajax({type:"GET",dataType:"jsonp",cache:!1,url:(t=a,n={},null!=l.next_url?l.next_url:(null!=l.hash?t+="/tags/"+l.hash+"/media/recent":null!=l.search?(t+="/media/search",n.lat=l.search.lat,n.lng=l.search.lng,null!=l.search.max_timestamp&&(n.max_timestamp=l.search.max_timestamp),null!=l.search.min_timestamp&&(n.min_timestamp=l.search.min_timestamp),null!=l.search.distance&&(n.distance=l.search.distance)):t+=null!=l.userId?"/users/"+l.userId+"/media/recent":null!=l.locationId?"/locations/"+l.locationId+"/media/recent":"/media/popular",null!=l.accessToken&&(n.access_token=l.accessToken),null!=l.clientId&&(n.client_id=l.clientId),null!=l.minId&&(n.min_id=l.minId),null!=l.maxId&&(n.max_id=l.maxId),null!=l.show&&(n.count=l.show),t+="?"+o.param(n))),success:function(e){var t=void 0!==e.data?e.data.length:0,n=null!=l.show&&t>l.show?l.show:t;if(0<n)for(var a=0;a<n;a++)i.append(s(e.data[a],a));else i.append(o("<div>").addClass("instagram-placeholder").attr("id","empty").append(o("<p>").html("No photos for this query")));null!=l.onComplete&&"function"==typeof l.onComplete&&l.onComplete(e.data,e),i.data("loaded",!0)}}),this}}(jQuery),function(){function e(){}for(var t,n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=n.length,s=window.console=window.console||{};a--;)s[t=n[a]]||(s[t]=e)}(),function($){$.fn.droptab=function(e){function t(e,t,n){return n.parent().width()<e?"L"!=t&&""!=t||("L"==t&&C.call(this),t="S",n.css("height",0).addClass(c).prev().css("display","block")):"S"!=t&&""!=t||("S"==t&&C.call(this),t="L",n.css("height","auto").removeClass(c+" "+m).prev().removeClass(m).css("display","none")),t}function a(e,t,n,a){e.addClass(function(){return setTimeout(function(){e.empty().text(a).removeClass(n)},t),n})}function s(e,t,n){return 0<e.find("."+t).length?e.find("."+t).find("a").text():n}var n=$.extend({breakWidth:"auto",selectBoxClass:"droptab-selector",selectCurrent:"droptab-select-current",selectButton:"droptab-select-button",smallMenuClass:"droptab-small-menu",menuClass:"droptab-menu",menuOpenClass:"open",activeClass:"active",hiddenMsgClass:"drop-tab-hidden",openMsg:"Choose",msgTransitionTime:250,autoClose:!1,droptabCallback:function(){},droptabSwitch:function(){}},e),i=this,l=n.breakWidth,o=n.selectBoxClass,r=n.selectCurrent,d=n.selectButton,c=n.smallMenuClass,u=n.menuClass,m=n.menuOpenClass,h=n.activeClass,p=n.hiddenMsgClass,g=n.openMsg,f=n.msgTransitionTime,v=n.autoClose,w=n.droptabCallback,C=n.droptabSwitch;this.addClass(u).before('<div class="'+o+'"><span class="'+r+'"></span><span class="'+d+'">Open Button</span></div>');var b=this.siblings("."+o),_=s(i,h,g);b.find("."+r).text(_),"auto"==l&&(l=0,i.find("li").each(function(){l=l+$(this).outerWidth(!0)+1}));var x=t(l,"",i);b.find("."+d).on("click",function(){var e=$(this),t=$(this).siblings("."+r),n=0;$(this).parent().hasClass(m)?(e.parent().toggleClass(m),i.toggleClass(m).css("height",0),(_=s(i,h,g))&&a(t,f,p,_)):(i.find("li").each(function(){n+=$(this).outerHeight(!0)}).promise().done(function(){e.parent().toggleClass(m),i.css("height",n).toggleClass(m)}),t.text()!=g&&a(t,f,p,g))}),i.find("a").on("click",function(){$(this).closest("."+u).hasClass(c)&&1==v&&setTimeout(function(){b.find("."+d).trigger("click")},250)}),$(window).on("resize",function(){x=t(l,x,i)}),w.call(this)}}(jQuery),$(document).ready(function(){if($("nav ul").droptab({breakWidth:768,targetWidth:$("body"),openMsg:"Menu"}),$("#aap").length)var n=setTimeout(function(){var e=$("#aap").find("span");if(e.length){clearTimeout(n);var t=e.html();e.html(t.replace("<br>"," "))}},1e3);if($("#twfeed").length){'<div id="loading-container"><img src="images/fancybox_loading.gif" width="32" height="32" alt="tweet loader" /></div>',$("#twitter-feed").html('<div id="loading-container"><img src="images/fancybox_loading.gif" width="32" height="32" alt="tweet loader" /></div>'),$.getJSON("get-tweets.php",function(e){for(var t="",n=0;n<e.length;n++){e[n].user.name;var a=e[n].user.screen_name,s=e[n].user.profile_image_url_https.replace("normal","bigger"),i=e[n].text,l=!1;e[n].id_str;void 0!==e[n].retweeted_status&&(s=e[n].retweeted_status.user.profile_image_url_https.replace("normal","bigger"),e[n].retweeted_status.user.name,a=e[n].retweeted_status.user.screen_name,e[n].retweeted_status.id_str,!0),"@"==e[n].text.substr(0,1)&&(l=!0),0==l&&1<e[n].text.length&&(i=addlinks(i),t+='<div class="twt col-xs-12 col-md-4">',t+='<div class="row no-margin">',t+='<div class="col-xs-3 padding-0 tw-img">',t+='<img src="'+s+'"images/twitter-feed-icon.png" class="responsive-img-full" alt="'+a+'" />',t+="</div>",t+='<div class="col-xs-9 tw-body">',t+='<span class="at"><a href="https://twitter.com/'+a+'">@'+a+'</a></span> <span class="time">'+relative_time(e[n].created_at)+"</span>",t+="<p>"+i+"</p>",t+="</div>",t+="</div>",t+="</div>")}$("#twfeed > .row").html(t)})}if($("#instfeed").length){var e=$("#instfeed");sesStorage()?null===sessionStorage.getItem("instContent")||sessionStorage.getItem("instContent").length<1e3?(populateInstagram(e),setTimeout(function(){sessionStorage.setItem("instContent",$("#instfeed").html())},1e3)):$("#instfeed").empty().html(sessionStorage.getItem("instContent")):populateInstagram(e)}if($("#contact-form").length){var t=!1;$("#contact-form").on("submit",function(e){e.preventDefault(),$("[required]").each(function(){""==$(this).val()&&(t=!0)}),t||($("#contact-form").find(".button").addClass("hidden"),$("#contact-spinner").removeClass("hidden"),$.ajax({type:"POST",url:"contact-form.php",data:$("#contact-form .item").serializeArray(),success:function(e){$("#contact-form")[0].reset(),$("#contact-msg").addClass("green").html(e)},error:function(){$("#contact-msg").addClass("red").html("Uh oh, we ran into a problem sending your message.  Please try again later, or give us a call.")},complete:function(){$("#contact-spinner").fadeOut("fast",function(){$("#contact-msg").fadeIn("fast")})}}))})}$("#newsletter-form").length&&$("#newsletter-form").on("submit",function(e){$("#newsletter-button").addClass("hidden"),$("#newsletter-spinner").removeClass("hidden")})});